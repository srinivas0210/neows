const data = {
  "links": {
    "next": "http://www.neowsapp.com/rest/v1/neo/browse?page=1&size=10&api_key=DEMO_KEY",
    "self": "http://www.neowsapp.com/rest/v1/neo/browse?page=0&size=10&api_key=DEMO_KEY"
  },
  "page": {
    "size": 10,
    "total_elements": 25104,
    "total_pages": 2511,
    "number": 0
  },
  "near_earth_objects": [
    {
      "links": {
        "self": "http://www.neowsapp.com/rest/v1/neo/2021277?api_key=DEMO_KEY"
      },
      "id": "2021277",
      "neo_reference_id": "2021277",
      "name": "21277 (1996 TO5)",
      "designation": "21277",
      "nasa_jpl_url": "http://ssd.jpl.nasa.gov/sbdb.cgi?sstr=2021277",
      "absolute_magnitude_h": 16.1,
      "estimated_diameter": {
        "kilometers": {
          "estimated_diameter_min": 1.6016033798,
          "estimated_diameter_max": 3.5812940302
        },
        "meters": {
          "estimated_diameter_min": 1601.6033797856,
          "estimated_diameter_max": 3581.2940301941
        },
        "miles": {
          "estimated_diameter_min": 0.9951898937,
          "estimated_diameter_max": 2.2253122528
        },
        "feet": {
          "estimated_diameter_min": 5254.6044325359,
          "estimated_diameter_max": 11749.652706022
        }
      },
      "is_potentially_hazardous_asteroid": false,
      "close_approach_data": [
        {
          "close_approach_date": "1945-06-07",
          "close_approach_date_full": "1945-Jun-07 22:35",
          "epoch_date_close_approach": -775272300000,
          "relative_velocity": {
            "kilometers_per_second": "15.509475255",
            "kilometers_per_hour": "55834.1109179878",
            "miles_per_hour": "34693.1451979019"
          },
          "miss_distance": {
            "astronomical": "0.0334232931",
            "lunar": "13.0016610159",
            "kilometers": "5000053.456145697",
            "miles": "3106889.1492847386"
          },
          "orbiting_body": "Mars"
        }
      ],
      "orbital_data": {
        "orbit_id": "165",
        "orbit_determination_date": "2020-08-02 06:25:53",
        "first_observation_date": "1990-02-04",
        "last_observation_date": "2020-05-13",
        "data_arc_in_days": 11056,
        "observations_used": 659,
        "orbit_uncertainty": "0",
        "minimum_orbit_intersection": ".313031",
        "jupiter_tisserand_invariant": "3.267",
        "epoch_osculation": "2459000.5",
        "eccentricity": ".5205881328788736",
        "semi_major_axis": "2.376601474329985",
        "inclination": "20.9522649964117",
        "ascending_node_longitude": "167.3841289832412",
        "orbital_period": "1338.236805731597",
        "perihelion_distance": "1.13937095021136",
        "perihelion_argument": "250.1729632865032",
        "aphelion_distance": "3.613831998448611",
        "perihelion_time": "2458492.539291811604",
        "mean_anomaly": "136.6468581379752",
        "mean_motion": ".2690106851479045",
        "equinox": "J2000",
        "orbit_class": {
          "orbit_class_type": "AMO",
          "orbit_class_description": "Near-Earth asteroid orbits similar to that of 1221 Amor",
          "orbit_class_range": "1.017 AU < q (perihelion) < 1.3 AU"
        }
      },
      "is_sentry_object": false
    },
    {
      "links": {
        "self": "http://www.neowsapp.com/rest/v1/neo/2162038?api_key=DEMO_KEY"
      },
      "id": "2162038",
      "neo_reference_id": "2162038",
      "name": "162038 (1996 DH)",
      "designation": "162038",
      "nasa_jpl_url": "http://ssd.jpl.nasa.gov/sbdb.cgi?sstr=2162038",
      "absolute_magnitude_h": 16.6,
      "estimated_diameter": {
        "kilometers": {
          "estimated_diameter_min": 1.2721987854,
          "estimated_diameter_max": 2.844722965
        },
        "meters": {
          "estimated_diameter_min": 1272.1987853936,
          "estimated_diameter_max": 2844.7229650327
        },
        "miles": {
          "estimated_diameter_min": 0.7905074315,
          "estimated_diameter_max": 1.7676283535
        },
        "feet": {
          "estimated_diameter_min": 4173.8806630706,
          "estimated_diameter_max": 9333.0808925979
        }
      },
      "is_potentially_hazardous_asteroid": false,
      "close_approach_data": [],
      "orbital_data": {
        "orbit_id": "254",
        "orbit_determination_date": "2020-05-26 08:20:27",
        "first_observation_date": "1996-02-18",
        "last_observation_date": "2020-04-25",
        "data_arc_in_days": 8833,
        "observations_used": 1170,
        "orbit_uncertainty": "1",
        "minimum_orbit_intersection": ".135023",
        "jupiter_tisserand_invariant": "4.293",
        "epoch_osculation": "2459000.5",
        "eccentricity": ".2766900137323586",
        "semi_major_axis": "1.586813070911491",
        "inclination": "17.23326680059163",
        "ascending_node_longitude": "309.2903552299683",
        "orbital_period": "730.107955454301",
        "perihelion_distance": "1.147757740530304",
        "perihelion_argument": "351.5495097631112",
        "aphelion_distance": "2.025868401292677",
        "perihelion_time": "2459176.565269603596",
        "mean_anomaly": "273.1861301006437",
        "mean_motion": ".4930777665283681",
        "equinox": "J2000",
        "orbit_class": {
          "orbit_class_type": "AMO",
          "orbit_class_description": "Near-Earth asteroid orbits similar to that of 1221 Amor",
          "orbit_class_range": "1.017 AU < q (perihelion) < 1.3 AU"
        }
      },
      "is_sentry_object": false
    },
    {
      "links": {
        "self": "http://www.neowsapp.com/rest/v1/neo/2189058?api_key=DEMO_KEY"
      },
      "id": "2189058",
      "neo_reference_id": "2189058",
      "name": "189058 (2000 UT16)",
      "designation": "189058",
      "nasa_jpl_url": "http://ssd.jpl.nasa.gov/sbdb.cgi?sstr=2189058",
      "absolute_magnitude_h": 16.5,
      "estimated_diameter": {
        "kilometers": {
          "estimated_diameter_min": 1.332155667,
          "estimated_diameter_max": 2.978790628
        },
        "meters": {
          "estimated_diameter_min": 1332.1556669813,
          "estimated_diameter_max": 2978.7906279817
        },
        "miles": {
          "estimated_diameter_min": 0.8277628989,
          "estimated_diameter_max": 1.8509341113
        },
        "feet": {
          "estimated_diameter_min": 4370.5895984589,
          "estimated_diameter_max": 9772.9354439076
        }
      },
      "is_potentially_hazardous_asteroid": false,
      "close_approach_data": [],
      "orbital_data": {
        "orbit_id": "131",
        "orbit_determination_date": "2020-05-22 09:03:02",
        "first_observation_date": "1996-11-19",
        "last_observation_date": "2020-05-21",
        "data_arc_in_days": 8584,
        "observations_used": 676,
        "orbit_uncertainty": "0",
        "minimum_orbit_intersection": ".538031",
        "jupiter_tisserand_invariant": "3.108",
        "epoch_osculation": "2459000.5",
        "eccentricity": ".5118219248656667",
        "semi_major_axis": "2.56922152100571",
        "inclination": "26.23457658555281",
        "ascending_node_longitude": "257.2698782920098",
        "orbital_period": "1504.183268887656",
        "perihelion_distance": "1.254237616718272",
        "perihelion_argument": "91.24859779633702",
        "aphelion_distance": "3.884205425293149",
        "perihelion_time": "2459278.734073290831",
        "mean_anomaly": "293.4095329628478",
        "mean_motion": ".2393325384254674",
        "equinox": "J2000",
        "orbit_class": {
          "orbit_class_type": "AMO",
          "orbit_class_description": "Near-Earth asteroid orbits similar to that of 1221 Amor",
          "orbit_class_range": "1.017 AU < q (perihelion) < 1.3 AU"
        }
      },
      "is_sentry_object": false
    },
    {
      "links": {
        "self": "http://www.neowsapp.com/rest/v1/neo/2276274?api_key=DEMO_KEY"
      },
      "id": "2276274",
      "neo_reference_id": "2276274",
      "name": "276274 (2002 SS41)",
      "designation": "276274",
      "nasa_jpl_url": "http://ssd.jpl.nasa.gov/sbdb.cgi?sstr=2276274",
      "absolute_magnitude_h": 17.2,
      "estimated_diameter": {
        "kilometers": {
          "estimated_diameter_min": 0.9650614696,
          "estimated_diameter_max": 2.1579430484
        },
        "meters": {
          "estimated_diameter_min": 965.0614695789,
          "estimated_diameter_max": 2157.9430484443
        },
        "miles": {
          "estimated_diameter_min": 0.5996612104,
          "estimated_diameter_max": 1.34088323
        },
        "feet": {
          "estimated_diameter_min": 3166.2122718533,
          "estimated_diameter_max": 7079.8658710581
        }
      },
      "is_potentially_hazardous_asteroid": false,
      "close_approach_data": [],
      "orbital_data": {
        "orbit_id": "130",
        "orbit_determination_date": "2020-10-13 07:06:39",
        "first_observation_date": "2002-09-11",
        "last_observation_date": "2020-10-12",
        "data_arc_in_days": 6606,
        "observations_used": 618,
        "orbit_uncertainty": "0",
        "minimum_orbit_intersection": ".601811",
        "jupiter_tisserand_invariant": "2.993",
        "epoch_osculation": "2459000.5",
        "eccentricity": ".3827108331821827",
        "semi_major_axis": "2.104710772852648",
        "inclination": "63.68500831492558",
        "ascending_node_longitude": "190.1070856784612",
        "orbital_period": "1115.28808584492",
        "perihelion_distance": "1.299215159366695",
        "perihelion_argument": "101.7860062141712",
        "aphelion_distance": "2.9102063863386",
        "perihelion_time": "2459093.016743260142",
        "mean_anomaly": "330.1368390854645",
        "mean_motion": ".3227865558406564",
        "equinox": "J2000",
        "orbit_class": {
          "orbit_class_type": "AMO",
          "orbit_class_description": "Near-Earth asteroid orbits similar to that of 1221 Amor",
          "orbit_class_range": "1.017 AU < q (perihelion) < 1.3 AU"
        }
      },
      "is_sentry_object": false
    },
    {
      "links": {
        "self": "http://www.neowsapp.com/rest/v1/neo/2322913?api_key=DEMO_KEY"
      },
      "id": "2322913",
      "neo_reference_id": "2322913",
      "name": "322913 (2002 CM1)",
      "designation": "322913",
      "nasa_jpl_url": "http://ssd.jpl.nasa.gov/sbdb.cgi?sstr=2322913",
      "absolute_magnitude_h": 16.7,
      "estimated_diameter": {
        "kilometers": {
          "estimated_diameter_min": 1.214940408,
          "estimated_diameter_max": 2.7166893409
        },
        "meters": {
          "estimated_diameter_min": 1214.9404079963,
          "estimated_diameter_max": 2716.6893408911
        },
        "miles": {
          "estimated_diameter_min": 0.7549287363,
          "estimated_diameter_max": 1.6880719724
        },
        "feet": {
          "estimated_diameter_min": 3986.0250881707,
          "estimated_diameter_max": 8913.0230571693
        }
      },
      "is_potentially_hazardous_asteroid": false,
      "close_approach_data": [],
      "orbital_data": {
        "orbit_id": "47",
        "orbit_determination_date": "2019-01-31 08:16:35",
        "first_observation_date": "2002-02-03",
        "last_observation_date": "2019-01-24",
        "data_arc_in_days": 6199,
        "observations_used": 139,
        "orbit_uncertainty": "0",
        "minimum_orbit_intersection": ".577928",
        "jupiter_tisserand_invariant": "3.097",
        "epoch_osculation": "2459000.5",
        "eccentricity": ".461920311152711",
        "semi_major_axis": "2.299413042700367",
        "inclination": "45.00039322133971",
        "ascending_node_longitude": "308.1421378366831",
        "orbital_period": "1273.573202796894",
        "perihelion_distance": "1.237267454547611",
        "perihelion_argument": "84.19797366483287",
        "aphelion_distance": "3.361558630853122",
        "perihelion_time": "2458482.209254870466",
        "mean_anomaly": "146.5048635106909",
        "mean_motion": ".2826692640905165",
        "equinox": "J2000",
        "orbit_class": {
          "orbit_class_type": "AMO",
          "orbit_class_description": "Near-Earth asteroid orbits similar to that of 1221 Amor",
          "orbit_class_range": "1.017 AU < q (perihelion) < 1.3 AU"
        }
      },
      "is_sentry_object": false
    },
    {
      "links": {
        "self": "http://www.neowsapp.com/rest/v1/neo/2435730?api_key=DEMO_KEY"
      },
      "id": "2435730",
      "neo_reference_id": "2435730",
      "name": "435730 (2008 UK90)",
      "designation": "435730",
      "nasa_jpl_url": "http://ssd.jpl.nasa.gov/sbdb.cgi?sstr=2435730",
      "absolute_magnitude_h": 18.9,
      "estimated_diameter": {
        "kilometers": {
          "estimated_diameter_min": 0.4411182,
          "estimated_diameter_max": 0.9863702813
        },
        "meters": {
          "estimated_diameter_min": 441.1181999969,
          "estimated_diameter_max": 986.3702813054
        },
        "miles": {
          "estimated_diameter_min": 0.2740980571,
          "estimated_diameter_max": 0.6129018881
        },
        "feet": {
          "estimated_diameter_min": 1447.2382352778,
          "estimated_diameter_max": 3236.1230737181
        }
      },
      "is_potentially_hazardous_asteroid": false,
      "close_approach_data": [],
      "orbital_data": {
        "orbit_id": "21",
        "orbit_determination_date": "2017-04-12 06:15:44",
        "first_observation_date": "2007-08-15",
        "last_observation_date": "2015-06-08",
        "data_arc_in_days": 2854,
        "observations_used": 62,
        "orbit_uncertainty": "1",
        "minimum_orbit_intersection": ".562229",
        "jupiter_tisserand_invariant": "3.545",
        "epoch_osculation": "2459000.5",
        "eccentricity": ".3712443228845679",
        "semi_major_axis": "2.003774487847362",
        "inclination": "34.6532328130074",
        "ascending_node_longitude": "48.82392530403121",
        "orbital_period": "1036.028472816094",
        "perihelion_distance": "1.259884584893097",
        "perihelion_argument": "91.34327992320877",
        "aphelion_distance": "2.747664390801628",
        "perihelion_time": "2459079.194780746868",
        "mean_anomaly": "332.655074824472",
        "mean_motion": ".3474807975320034",
        "equinox": "J2000",
        "orbit_class": {
          "orbit_class_type": "AMO",
          "orbit_class_description": "Near-Earth asteroid orbits similar to that of 1221 Amor",
          "orbit_class_range": "1.017 AU < q (perihelion) < 1.3 AU"
        }
      },
      "is_sentry_object": false
    },
    {
      "links": {
        "self": "http://www.neowsapp.com/rest/v1/neo/2451297?api_key=DEMO_KEY"
      },
      "id": "2451297",
      "neo_reference_id": "2451297",
      "name": "451297 (2010 TK54)",
      "designation": "451297",
      "nasa_jpl_url": "http://ssd.jpl.nasa.gov/sbdb.cgi?sstr=2451297",
      "absolute_magnitude_h": 19.2,
      "estimated_diameter": {
        "kilometers": {
          "estimated_diameter_min": 0.3841978911,
          "estimated_diameter_max": 0.8590926012
        },
        "meters": {
          "estimated_diameter_min": 384.1978910643,
          "estimated_diameter_max": 859.0926012318
        },
        "miles": {
          "estimated_diameter_min": 0.2387294278,
          "estimated_diameter_max": 0.5338152287
        },
        "feet": {
          "estimated_diameter_min": 1260.4918089193,
          "estimated_diameter_max": 2818.5453698252
        }
      },
      "is_potentially_hazardous_asteroid": true,
      "close_approach_data": [],
      "orbital_data": {
        "orbit_id": "24",
        "orbit_determination_date": "2017-04-06 09:20:08",
        "first_observation_date": "2010-10-08",
        "last_observation_date": "2015-11-09",
        "data_arc_in_days": 1858,
        "observations_used": 69,
        "orbit_uncertainty": "1",
        "minimum_orbit_intersection": ".0135957",
        "jupiter_tisserand_invariant": "3.715",
        "epoch_osculation": "2459000.5",
        "eccentricity": ".4952001922173939",
        "semi_major_axis": "1.840341326169751",
        "inclination": "30.80183982595386",
        "ascending_node_longitude": "28.16956502806046",
        "orbital_period": "911.8974364307537",
        "perihelion_distance": ".9290039477048767",
        "perihelion_argument": "222.967030830588",
        "aphelion_distance": "2.751678704634625",
        "perihelion_time": "2458887.832809816679",
        "mean_anomaly": "44.47889296054142",
        "mean_motion": ".3947812392247438",
        "equinox": "J2000",
        "orbit_class": {
          "orbit_class_type": "APO",
          "orbit_class_description": "Near-Earth asteroid orbits which cross the Earth’s orbit similar to that of 1862 Apollo",
          "orbit_class_range": "a (semi-major axis) > 1.0 AU; q (perihelion) < 1.017 AU"
        }
      },
      "is_sentry_object": false
    },
    {
      "links": {
        "self": "http://www.neowsapp.com/rest/v1/neo/2452307?api_key=DEMO_KEY"
      },
      "id": "2452307",
      "neo_reference_id": "2452307",
      "name": "452307 Manawydan (1997 XV11)",
      "name_limited": "Manawydan",
      "designation": "452307",
      "nasa_jpl_url": "http://ssd.jpl.nasa.gov/sbdb.cgi?sstr=2452307",
      "absolute_magnitude_h": 18.2,
      "estimated_diameter": {
        "kilometers": {
          "estimated_diameter_min": 0.6089126221,
          "estimated_diameter_max": 1.3615700154
        },
        "meters": {
          "estimated_diameter_min": 608.9126221057,
          "estimated_diameter_max": 1361.5700153859
        },
        "miles": {
          "estimated_diameter_min": 0.3783606449,
          "estimated_diameter_max": 0.846040122
        },
        "feet": {
          "estimated_diameter_min": 1997.7448871092,
          "estimated_diameter_max": 4467.0933692788
        }
      },
      "is_potentially_hazardous_asteroid": false,
      "close_approach_data": [],
      "orbital_data": {
        "orbit_id": "45",
        "orbit_determination_date": "2020-10-23 08:31:31",
        "first_observation_date": "1997-12-05",
        "last_observation_date": "2020-10-22",
        "data_arc_in_days": 8357,
        "observations_used": 142,
        "orbit_uncertainty": "0",
        "minimum_orbit_intersection": ".583137",
        "jupiter_tisserand_invariant": "3.600",
        "epoch_osculation": "2459000.5",
        "eccentricity": ".3180408179655388",
        "semi_major_axis": "1.866953098184847",
        "inclination": "44.26501087184045",
        "ascending_node_longitude": "241.2472262221375",
        "orbital_period": "931.7481484447105",
        "perihelion_distance": "1.273185807734841",
        "perihelion_argument": "270.157025759049",
        "aphelion_distance": "2.460720388634853",
        "perihelion_time": "2459313.408195425144",
        "mean_anomaly": "239.1015034040219",
        "mean_motion": ".3863705021586766",
        "equinox": "J2000",
        "orbit_class": {
          "orbit_class_type": "AMO",
          "orbit_class_description": "Near-Earth asteroid orbits similar to that of 1221 Amor",
          "orbit_class_range": "1.017 AU < q (perihelion) < 1.3 AU"
        }
      },
      "is_sentry_object": false
    },
    {
      "links": {
        "self": "http://www.neowsapp.com/rest/v1/neo/2452421?api_key=DEMO_KEY"
      },
      "id": "2452421",
      "neo_reference_id": "2452421",
      "name": "452421 (2002 VX99)",
      "designation": "452421",
      "nasa_jpl_url": "http://ssd.jpl.nasa.gov/sbdb.cgi?sstr=2452421",
      "absolute_magnitude_h": 18.4,
      "estimated_diameter": {
        "kilometers": {
          "estimated_diameter_min": 0.5553349116,
          "estimated_diameter_max": 1.2417666126
        },
        "meters": {
          "estimated_diameter_min": 555.334911581,
          "estimated_diameter_max": 1241.766612574
        },
        "miles": {
          "estimated_diameter_min": 0.3450690093,
          "estimated_diameter_max": 0.7715977618
        },
        "feet": {
          "estimated_diameter_min": 1821.9649913114,
          "estimated_diameter_max": 4074.0375731972
        }
      },
      "is_potentially_hazardous_asteroid": false,
      "close_approach_data": [],
      "orbital_data": {
        "orbit_id": "40",
        "orbit_determination_date": "2020-01-30 14:27:08",
        "first_observation_date": "2002-11-01",
        "last_observation_date": "2020-01-28",
        "data_arc_in_days": 6297,
        "observations_used": 142,
        "orbit_uncertainty": "0",
        "minimum_orbit_intersection": ".516625",
        "jupiter_tisserand_invariant": "3.088",
        "epoch_osculation": "2459000.5",
        "eccentricity": ".5117753256012763",
        "semi_major_axis": "2.632957002913491",
        "inclination": "24.49524071390701",
        "ascending_node_longitude": "234.3221660267528",
        "orbital_period": "1560.501093581767",
        "perihelion_distance": "1.285474575453279",
        "perihelion_argument": "259.8862702649891",
        "aphelion_distance": "3.980439430373703",
        "perihelion_time": "2458952.353976216485",
        "mean_anomaly": "11.10705313399213",
        "mean_motion": ".2306951283024761",
        "equinox": "J2000",
        "orbit_class": {
          "orbit_class_type": "AMO",
          "orbit_class_description": "Near-Earth asteroid orbits similar to that of 1221 Amor",
          "orbit_class_range": "1.017 AU < q (perihelion) < 1.3 AU"
        }
      },
      "is_sentry_object": false
    },
    {
      "links": {
        "self": "http://www.neowsapp.com/rest/v1/neo/2453100?api_key=DEMO_KEY"
      },
      "id": "2453100",
      "neo_reference_id": "2453100",
      "name": "453100 (2007 WU4)",
      "designation": "453100",
      "nasa_jpl_url": "http://ssd.jpl.nasa.gov/sbdb.cgi?sstr=2453100",
      "absolute_magnitude_h": 18.9,
      "estimated_diameter": {
        "kilometers": {
          "estimated_diameter_min": 0.4411182,
          "estimated_diameter_max": 0.9863702813
        },
        "meters": {
          "estimated_diameter_min": 441.1181999969,
          "estimated_diameter_max": 986.3702813054
        },
        "miles": {
          "estimated_diameter_min": 0.2740980571,
          "estimated_diameter_max": 0.6129018881
        },
        "feet": {
          "estimated_diameter_min": 1447.2382352778,
          "estimated_diameter_max": 3236.1230737181
        }
      },
      "is_potentially_hazardous_asteroid": false,
      "close_approach_data": [],
      "orbital_data": {
        "orbit_id": "31",
        "orbit_determination_date": "2017-04-06 09:20:04",
        "first_observation_date": "2007-11-19",
        "last_observation_date": "2016-01-01",
        "data_arc_in_days": 2965,
        "observations_used": 98,
        "orbit_uncertainty": "0",
        "minimum_orbit_intersection": ".509168",
        "jupiter_tisserand_invariant": "3.091",
        "epoch_osculation": "2459000.5",
        "eccentricity": ".5061366082762225",
        "semi_major_axis": "2.555363777180177",
        "inclination": "29.22224917258454",
        "ascending_node_longitude": "66.99377756542738",
        "orbital_period": "1492.029906506152",
        "perihelion_distance": "1.262000622086286",
        "perihelion_argument": "283.2089939607603",
        "aphelion_distance": "3.848726932274069",
        "perihelion_time": "2458788.015182019607",
        "mean_anomaly": "51.26876756248583",
        "mean_motion": ".2412820268750529",
        "equinox": "J2000",
        "orbit_class": {
          "orbit_class_type": "AMO",
          "orbit_class_description": "Near-Earth asteroid orbits similar to that of 1221 Amor",
          "orbit_class_range": "1.017 AU < q (perihelion) < 1.3 AU"
        }
      },
      "is_sentry_object": false
    }
  ]
}

const convToAsteroidObject = (object, myFav) => {
  return {
    name: object.name,
    id: object.id,
    height: object.absolute_magnitude_h,
    description: object.orbital_data && object.orbital_data.orbit_class ? object.orbital_data.orbit_class.orbit_class_description : null,
    nasaUrl: object.nasa_jpl_url,
    isHazardous: object.is_potentially_hazardous_asteroid,
    fav: myFav.includes(object.id),
  }
}

const searchAsteroidById = async (asteroidId, KEY, myFav, setListItems, setLoading) => {
  setLoading(true)
  const response = await fetch(`http://www.neowsapp.com/rest/v1/neo/${asteroidId}?api_key=${KEY}`)
  const object = await response.json()
  setListItems([
    {
      name: object.name,
      id: object.id,
      height: object.absolute_magnitude_h,
      description: object.orbital_data.orbit_class.orbit_class_description,
      nasaUrl: object.nasa_jpl_url,
      isHazardous: object.is_potentially_hazardous_asteroid,
      fav: myFav.includes(object.id)
    }
  ]);
  setLoading(false)
}

const searchAsteroidByDates = (start, end, KEY, myFav, setListItems, setLoading) => {
  setLoading(true)
  fetch(`https://api.nasa.gov/neo/rest/v1/feed?start_date=${start}&end_date=${end}&detailed=true&api_key=${KEY}`)
    .then((response) => response.json())
    .then((data) => {
      const asteroidsByDates = [];
      Object.values(data.near_earth_objects).map((a) => {
        Object.values(a).map((object) => {
          console.log(object);
          asteroidsByDates.push(convToAsteroidObject(object, myFav));
        });
      })
      setLoading(false);
      setListItems(asteroidsByDates);
    })
}

const showMyFav = async (userId, KEY, myFav, setLoading, setListItems, history) => {
  if (!userId) {
    history.push('/account/login')
  }
  else {
    console.log(myFav, 'myFav');

    const favAsteroids = []
    setLoading(true)
    for (const favId of myFav) {
      const response = await fetch(`http://www.neowsapp.com/rest/v1/neo/${favId}?api_key=${KEY}`)
      const object = await response.json()
      favAsteroids.push(convToAsteroidObject(object, myFav));
    }
    setLoading(false)
    setListItems(favAsteroids);
  }
}
const goToSignUpPage = (history) => {
  history.push("/account/signup");
}

const signIn = async (userName, password, history, db) => {
  const citiesRef = db.collection('users');
  const isNameCorrect = await citiesRef.where('userName', '==', userName).get();
  const isPasswordCorrect = await citiesRef.where('password', '==', password).get();

  if (isNameCorrect.empty && isPasswordCorrect.empty) {
    alert('incorrect credentials , please try again');
  }
  else {
    history.push(`/?userName=${userName}&userId=${isNameCorrect.docs[0].id}`);
  }
}

const addFavToFirebase = (favArray , db , userId) => {
  db.collection('users').doc(userId).collection('favorites').doc('favorites').set({
    favorites: favArray,
  });
}

export {
  convToAsteroidObject,
  searchAsteroidById,
  searchAsteroidByDates,
  showMyFav,
  goToSignUpPage,
  signIn,
  addFavToFirebase
};
export default data;